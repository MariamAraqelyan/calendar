<div class="calendar"
    [attr.data-theme]="configState().theme ? 'dark' : 'light'"
    [class]="'calendar--' + viewState() + '-view'">
    
    <header class="calendar__header">
        <div class="calendar__controls">
            <button class="calendar__btn" (click)="store.prev()">&lt;</button>
            <button class="calendar__btn" (click)="store.today()">Today</button>
            <button class="calendar__btn" (click)="store.next()">&gt;</button>
        </div>
        
        <h2 class="calendar__title">{{ calendarTitle() }}</h2>
        
        <nav class="calendar__view-switcher">
            <button
                class="calendar__btn"
                [class.calendar__btn--active]="viewState() === VIEWS.MONTH" 
                (click)="store.setView(VIEWS.MONTH)" 
            >Month</button>
            <button 
                class="calendar__btn"
                [class.calendar__btn--active]="viewState() === VIEWS.WEEK" 
                (click)="store.setView(VIEWS.WEEK)" 
            >Week</button>
            <button
                class="calendar__btn"
                [class.calendar__btn--active]="viewState() === VIEWS.DAY" 
                (click)="store.setView(VIEWS.DAY)" 
            >Day</button>
        </nav>
    </header>

    <main class="calendar__body">
        @switch (viewState()) {
            @case (VIEWS.MONTH) {
                <app-monthly
                    [dayCellTemplate]="dayCellTemplate()!"
                    [eventTemplate]="eventTemplate()!"
                    (dateClick)="onDateClick($event)"
                    (eventClick)="onEventClick($event)"
                />
            }
            @case (VIEWS.WEEK) {
                <app-weekly
                    (dateClick)="onDateClick($event)"
                    (eventClick)="onEventClick($event)"
                />
            }
            @case (VIEWS.DAY) {
                <app-daily
                    (dateClick)="onDateClick($event)"
                    (eventClick)="onEventClick($event)"
                />
            }
        }
    </main>
</div>